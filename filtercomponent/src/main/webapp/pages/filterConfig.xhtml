<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	<h:head>
		Component for Filter
	</h:head>
	<h:body>
		<h:form>
			<h:panelGrid columns="#{filterController.menuCount}" id="filterMenuPanel">
				<c:forEach var="filter" items="#{filterController.optionFilters}">
					<p:selectCheckboxMenu id="chkBox_#{filter.filterName}" label="#{filter.filterName}:All" value="#{filter.values}"
						filter="true" filterText="Filter" filterMatchMode="startsWith" rendered="#{filter.type != 'DATE'}" >
						<f:selectItems var="option" value="#{filter.options}" itemLabel="#{option.name}" itemValue="#{option.id}"/>
					</p:selectCheckboxMenu>
				</c:forEach>
				<c:forEach var="filter" items="#{filterController.dateFilters}">
 					<p:commandButton id="radio_#{filter.filterName}" label="#{filter.filterName}:All" value="#{filter.filterName}:All" onclick="dlg.show()" type="button" styleClass="ui-selectcheckboxmenu ui-widget ui-state-default ui-corner-all ui-helper-clearfix"/>
					<!-- <p:overlayPanel for="radio_#{filter.filterName}" hideEffect="fade" dynami="true"> -->
					<p:dialog id="dialog" widgetVar="dlg" resizable="false" header="#{filter.filterName} Filter Definition" modal="true">
						<p:outputPanel id="customPanel">
							<p:selectOneRadio id="customRadio" value="#{filter.choice}" layout="custom">
								<f:selectItem itemLabel="Option 1" itemValue="withinButton"/>
								<f:selectItem itemLabel="Option 2" itemValue="moreThanButton"/>
								<f:selectItem itemLabel="Option 3" itemValue="betweenButton"/>
							</p:selectOneRadio>
							<h:panelGrid columns="1">
								<h:panelGrid columns="4">
									<p:radioButton id="opt1" for="customRadio" itemIndex="0"/>
									<p:outputLabel value="Within the last"/>
									<p:inputText id="within" value="#{filter.withinVal}">
									</p:inputText>
									<p:selectOneMenu value="#{filter.withinChoice}">
										<f:selectItem itemLabel="days" itemValue="days"/>
										<f:selectItem itemLabel="weeks" itemValue="weeks"/>
										<f:selectItem itemLabel="months" itemValue="months"/>
										<f:selectItem itemLabel="years" itemValue="years"/>
									</p:selectOneMenu>									
								</h:panelGrid>
								<h:panelGrid columns="5">
									<p:radioButton id="opt2" for="customRadio" itemIndex="1"/>
									<p:outputLabel value="More than"/>
									<p:inputText id="moreThan" value="#{filter.moreThanVal}"/>
									<p:selectOneMenu value="#{filter.moreThanChoice}">
										<f:selectItem itemLabel="seconds" itemValue="seconds"/>
										<f:selectItem itemLabel="minutes" itemValue="minutes"/>
										<f:selectItem itemLabel="hours" itemValue="hours"/>
									</p:selectOneMenu>
									<p:outputLabel value="ago"/>
								</h:panelGrid>
								<h:panelGrid columns="5">
									<p:radioButton id="opt3" for="customRadio" itemIndex="2"/>
									<p:outputLabel value="Between"/>
									<p:calendar value="#{filter.startDate}" id="startButtonCal" showOn="button" />
									<p:outputLabel value="and"/>
									<p:calendar value="#{filter.endDate}" id="endButtonCal" showOn="button" />
								</h:panelGrid>								
							</h:panelGrid>
						</p:outputPanel>
					</p:dialog>
					<!-- </p:overlayPanel> -->
				</c:forEach>
			</h:panelGrid>
		</h:form>
	</h:body>
</html>    
